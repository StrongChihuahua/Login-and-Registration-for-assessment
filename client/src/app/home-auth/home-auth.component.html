<app-home-auth-navbar></app-home-auth-navbar>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
    <div class="profile">
        <div class="card">
            <img src="../../assets/profile.jpg" alt="Avatar" style="width:100%">
            <div class="container">
                <h3><b>{{first_name }} {{last_name}}</b></h3> 
                <p>Username: {{username}}</p> 
                <p>User ID: {{_id}}</p> 
                <button type="button" (click)="openModal(template)" class="btn btn-secondary mb-2" >Edit Profile</button>
                <br>
            </div>
        </div>
    </div>
        
    <div class="main">
   
    </div>


<ng-template #template>
    <div class="modal-header">
        <h4 class="modal-title pull-left display-5">EDIT PROFILE</h4>
        <button type="button" class="close pull-right" aria-label="Close" (click)="onReset()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form id="form1">
        <alert type="danger" *ngIf="errors" >
            {{errors}}
        </alert>
        <form [formGroup]="firstNameForm">
            <div class="form-group">
                <label for="first_name"><b>First Name</b></label>
                <input  class="form-control"
                        id="first_name" 
                        type="text"
                        (keyup.enter)="onSubmitEdit()" 
                        formControlName="first_name"
                        [ngClass]="{'is-invalid': firstNameForm.get('first_name').hasError('required')}">
                <div class="invalid-feedback">First name shouldn't be empty</div>
            </div>
        </form>

        <form [formGroup]="lastNameForm">
            <div class="form-group">
                    <label for="last_name"><b>Last Name</b></label>
                <input  class="form-control"
                        id="last_name" 
                        type="text"
                        (keyup.enter)="onSubmitEdit()" 
                        formControlName="last_name" 
                        [ngClass]="{'is-invalid': lastNameForm.get('last_name').hasError('required')}">
                <div class="invalid-feedback">Last name shouldn't be empty</div>
            </div>
        </form>

        <form [formGroup]="usernameForm">
                <div class="form-group">
                    <label for="username"><b>Username</b></label>
                    <input  class="form-control" 
                            id="username"
                            type="text"  
                            formControlName="username"  
                            minlength="4"
                            (keyup.enter)="onSubmitEdit()"
                            placeholder="Username"
                            [ngClass]="{'is-invalid': usernameForm.get('username').hasError('minlength') || usernameForm.get('username').hasError('required')}">
                    <div class="invalid-feedback">
                        <div *ngIf="usernameForm.get('username').hasError('minlength')">Username must be at least 4 characters long</div>
                        <div *ngIf="usernameForm.get('username').hasError('required')">Username shouldn't be empty</div>
                    </div>
                    
                </div>
        </form>

        <form [formGroup]="passwordForm">
            <div class="form-group">
                <label for="password"><b>New Password</b></label>
                <input  class="form-control" 
                        id="password" 
                        type="password" 
                        formControlName="password" 
                        (keyup.enter)="onSubmitEdit()"
                        minlength="8" 
                        placeholder="Enter new password"
                        [ngClass]="{'is-invalid': passwordForm.get('password').hasError('minlength')}">
                <div class="invalid-feedback">Password must be at least 8 characters long</div>
            </div>
        </form>
    </form>
        <button type="submit" class="btn btn-primary mt-3" form="form1" (click)="onSubmitEdit()">Save changes</button>
    </div>
    
</ng-template>
</body>
